<!DOCTYPE html>
<html lang="uk">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è –≤ –º–∞–π–±—É—Ç–Ω—î ‚Äî –≤—ñ–¥ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞</title>
		<meta
			name="description"
			content="–ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∏–π —Å–∞–π—Ç‚Äë–∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è: –∫–æ–Ω–≤–µ—Ä—Ç, —Ñ–æ—Ä–º–∞ —Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –∫–æ—Ö–∞–Ω–Ω—è —ñ–∑ —Å—é—Ä–ø—Ä–∏–∑–æ–º." />
		<style>
			:root {
				--bg: #0e0f1a; /* —Ñ–æ–Ω */
				--fg: #e8ecf8; /* —Ç–µ–∫—Å—Ç */
				--muted: #a9b0c7; /* –≤—Ç–æ—Ä–∏—á–Ω–∏–π —Ç–µ–∫—Å—Ç */
				--card: #14172a; /* –∫–∞—Ä—Ç–æ—á–∫–∏ */
				--accent: #8b5cf6; /* —Ñ—ñ–æ–ª–µ—Ç–æ–≤–∏–π */
				--accent2: #22d3ee; /* –±—ñ—Ä—é–∑–æ–≤–∏–π */
				--ok: #10b981; /* –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è */
				--danger: #ef4444;
				--shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
				--radius: 18px;
			}
			* {
				box-sizing: border-box;
			}
			html,
			body {
				margin: 0;
				padding: 0;
				font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
					Cantarell, Noto Sans, sans-serif;
				color: var(--fg);
				background: radial-gradient(
						1000px 700px at 80% -10%,
						rgba(34, 211, 238, 0.12),
						transparent 60%
					),
					radial-gradient(
						900px 900px at -10% 30%,
						rgba(139, 92, 246, 0.12),
						transparent 60%
					),
					var(--bg);
			}
			a {
				color: inherit;
				text-decoration: none;
			}
			.container {
				max-width: 980px;
				margin: 0 auto;
				padding: 24px;
			}
			.center {
				display: grid;
				place-items: center;
				min-height: 100dvh;
			}
			.hidden {
				display: none;
			}

			/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
			.card {
				background: linear-gradient(
					180deg,
					rgba(255, 255, 255, 0.04),
					rgba(255, 255, 255, 0.02)
				);
				border: 1px solid rgba(255, 255, 255, 0.08);
				backdrop-filter: blur(6px);
				border-radius: var(--radius);
				box-shadow: var(--shadow);
			}

			/* ====== –®–∞–≥ 1: –ö–æ–Ω–≤–µ—Ä—Ç ====== */
			.stage {
				position: relative;
			}
			.cta {
				position: absolute;
				inset: auto 0 -96px 0;
				margin: auto;
				text-align: center;
				color: var(--muted);
				opacity: 0.9;
			}
			.title {
				font-size: clamp(22px, 4vw, 34px);
				font-weight: 700;
				letter-spacing: 0.2px;
				margin-bottom: 8px;
			}

			.envelope-wrap {
				width: min(380px, 90vw);
				height: 260px;
				position: relative;
				animation: floatIn 0.9s cubic-bezier(0.2, 0.9, 0.2, 1) both;
				cursor: pointer;
			}
			.envelope {
				position: absolute;
				inset: 0;
				border-radius: 20px;
				background: linear-gradient(180deg, #1a1f3a, #11152a);
				box-shadow: var(--shadow);
				overflow: hidden;
			}
			.envelope .back {
				position: absolute;
				inset: 0;
				background: linear-gradient(180deg, #182044, #0d1228);
			}
			.envelope .flap {
				position: absolute;
				left: 0;
				right: 0;
				top: 0;
				height: 60%;
				background: linear-gradient(180deg, #212a58, #151a37);
				clip-path: polygon(0 0, 100% 0, 50% 100%);
				transform-origin: 50% 0;
				transition: transform 0.8s cubic-bezier(0.2, 0.9, 0.2, 1);
			}
			.envelope .letter {
				position: absolute;
				left: 6%;
				right: 6%;
				top: 20%;
				height: 68%;
				background: #fff;
				border-radius: 12px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
				display: grid;
				place-items: center;
				padding: 18px;
				color: #14172a;
				transform: translateY(6%);
				transition: transform 0.8s 0.15s cubic-bezier(0.2, 0.9, 0.2, 1);
			}

			.envelope-wrap:hover .envelope .letter {
				transform: translateY(0);
			}
			.envelope-wrap.opened .flap {
				transform: rotateX(170deg);
			}
			.envelope-wrap.opened .letter {
				transform: translateY(-70%);
			}

			.note {
				font-size: clamp(14px, 2.5vw, 16px);
				text-align: center;
				color: var(--muted);
			}
			@keyframes floatIn {
				0% {
					transform: translateY(-80vh) scale(0.8);
					opacity: 0;
				}
				100% {
					transform: none;
					opacity: 1;
				}
			}

			/* ====== –®–∞–≥ 2: –§–æ—Ä–º–∞ ====== */
			form {
				display: grid;
				gap: 14px;
				padding: 22px;
			}
			.form-card {
				width: min(680px, 95vw);
			}
			label {
				font-weight: 600;
			}
			input[type="text"],
			input[type="date"] {
				width: 100%;
				padding: 12px 14px;
				border-radius: 12px;
				border: 1px solid rgba(255, 255, 255, 0.12);
				background: #0f1327;
				color: var(--fg);
				outline: none;
			}
			.agree {
				display: flex;
				gap: 10px;
				align-items: flex-start;
			}
			.agree input {
				margin-top: 3px;
			}
			.btn {
				display: inline-flex;
				align-items: center;
				justify-content: center;
				gap: 10px;
				border: 0;
				border-radius: 14px;
				padding: 12px 16px;
				font-weight: 700;
				cursor: pointer;
			}
			.btn.primary {
				background: linear-gradient(90deg, var(--accent), var(--accent2));
				color: #0b0d18;
			}
			.btn.ghost {
				background: transparent;
				border: 1px solid rgba(255, 255, 255, 0.15);
				color: var(--fg);
			}
			.btn:disabled {
				opacity: 0.6;
				cursor: not-allowed;
			}
			.help {
				color: #fca5a5;
				font-size: 14px;
			}

			/* ====== –®–∞–≥ 3: –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç ====== */
			.cert {
				width: min(760px, 96vw);
				margin: auto;
				padding: 26px;
			}
			.paper {
				background: #fff;
				color: #0f1220;
				border-radius: 18px;
				box-shadow: var(--shadow);
				padding: 34px 28px;
				position: relative;
			}
			.paper:before {
				content: "";
				position: absolute;
				inset: 0;
				border: 2px dashed rgba(20, 23, 42, 0.12);
				border-radius: 16px;
				pointer-events: none;
				margin: 10px;
			}
			.paper h2 {
				margin: 0 0 6px 0;
				font-size: 28px;
			}
			.paper h3 {
				margin: 0 0 18px 0;
				font-weight: 500;
				color: #4b5563;
			}
			.paper p {
				margin: 10px 0;
			}
			.sign {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-top: 22px;
			}
			.sign .line {
				border-top: 1px solid #11182733;
				flex: 1;
				margin: 0 12px;
			}
			.cert-actions {
				display: flex;
				gap: 10px;
				margin-top: 16px;
				align-items: center;
				justify-content: center;
				flex-wrap: wrap;
			}

			/* –°–µ—Ä—Ü—è‚Äë–∫–æ–Ω—Ñ–µ—Ç—ñ */
			.hearts {
				position: fixed;
				inset: 0;
				pointer-events: none;
				overflow: hidden;
			}
			.heart {
				position: absolute;
				width: 18px;
				height: 18px;
				transform: translate(-50%, -50%);
			}
			.heart:before {
				content: "‚ù§";
				font-size: 18px;
			}
			@keyframes burst {
				0% {
					transform: translate(-50%, -50%) scale(0.6);
					opacity: 0;
				}
				10% {
					opacity: 1;
				}
				100% {
					transform: translate(var(--dx), var(--dy)) scale(0.6);
					opacity: 0;
				}
			}

			footer {
				color: var(--muted);
				font-size: 13px;
				text-align: center;
				margin: 36px 0 16px;
			}

			/* –ú–æ–≤–∞ ‚Äî –ø–ª–∞–≤–∞—é—á–∏–π –ø–µ—Ä–µ–º–∏–∫–∞—á –ø—Ä–∞–≤–æ—Ä—É—á –∑–≤–µ—Ä—Ö—É */
			.lang {
				position: fixed;
				top: 14px;
				right: 14px;
				z-index: 60;
			}
			.lang button {
				background: #0f1327;
				border: 1px solid rgba(255, 255, 255, 0.15);
				color: var(--fg);
				border-radius: 999px;
				padding: 8px 12px;
				font-weight: 700;
				cursor: pointer;
				display: flex;
				gap: 8px;
				align-items: center;
				box-shadow: var(--shadow);
			}
			.shake {
				animation: shake 2.2s ease-in-out infinite;
			}
			@keyframes shake {
				0%,
				100% {
					transform: rotate(0);
				}
				20% {
					transform: rotate(2deg);
				}
				40% {
					transform: rotate(-2deg);
				}
				60% {
					transform: 1.6deg;
				}
				80% {
					transform: -1.6deg;
				}
			}

			/* QR –±–ª–æ–∫ */
			#qrBox {
				margin-top: 10px;
				text-align: center;
			}
			#qrBox img {
				width: 220px;
				height: 220px;
				image-rendering: pixelated;
				border-radius: 12px;
				box-shadow: var(--shadow);
				background: #fff;
			}
		</style>
	</head>
	<body>
		<!-- –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤–∏ -->
		<div class="lang">
			<button id="langBtn" class="shake" title="–ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É">
				üåê <span id="langLabel">UK</span>
			</button>
		</div>

		<main class="container">
			<!-- –®–∞–≥ 1: –ö–æ–Ω–≤–µ—Ä—Ç -->
			<section id="step1" class="center stage">
				<div
					id="envelopeWrap"
					class="envelope-wrap"
					title="–ö–ª—ñ–∫–Ω–∏, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏">
					<div class="envelope">
						<div class="back"></div>
						<div class="flap"></div>
						<div class="letter">
							<div style="text-align: center">
								<div class="title" id="heroTitle">–°–ø–µ—à–ª —ñ–Ω–≤—ñ—Ç–µ–π—à–Ω —Ñ–æ—Ä —é</div>
								<div class="note" id="heroNote">–¢–æ—Ä–∫–Ω–∏—Å—å –∫–æ–Ω–≤–µ—Ä—Ç–∞ ‚úâÔ∏è</div>
							</div>
						</div>
					</div>
				</div>
				<div class="cta">
					<div id="heroCta">–ú–∞–ª–µ–Ω—å–∫–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –≤—ñ–¥ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞</div>
				</div>
			</section>

			<!-- –®–∞–≥ 2: –§–æ—Ä–º–∞ -->
			<section id="step2" class="center hidden">
				<div class="form-card card" style="padding: 8px 8px 16px 8px">
					<form id="inviteForm">
						<h2 id="formTitle" style="margin: 6px 10px 4px 10px">
							–ö—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞
						</h2>
						<div>
							<label for="last" id="lblLast">–ü—Ä—ñ–∑–≤–∏—â–µ</label>
							<input
								id="last"
								type="text"
								autocomplete="family-name"
								required />
						</div>
						<div>
							<label for="first" id="lblFirst">–Ü–º'—è</label>
							<input
								id="first"
								type="text"
								autocomplete="given-name"
								required />
						</div>
						<div>
							<label for="middle" id="lblMiddle">–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ</label>
							<input id="middle" type="text" required />
						</div>
						<div>
							<label for="dob" id="lblDob">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
							<input id="dob" type="date" required />
						</div>
						<div>
							<label for="pob" id="lblPob">–ú—ñ—Å—Ü–µ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
							<input
								id="pob"
								type="text"
								placeholder="–ú—ñ—Å—Ç–æ, –∫—Ä–∞—ó–Ω–∞"
								required />
						</div>
						<div class="agree">
							<input id="agree" type="checkbox" required />
							<label for="agree" id="agreeText"
								>–¢–∞–∫, —è –ø–æ–≥–æ–¥–∂—É—é—Å—å —Å—Ç–∞—Ç–∏ –¥—ñ–≤—á–∏–Ω–æ—é <b>–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –°—Ç–æ—Ä–æ–∂—É–∫–∞</b> —ñ
								–≤–∏—Ä—É—à–∏—Ç–∏ –∑ –Ω–∏–º —É –≤–µ–ª–∏–∫–µ –ø—Ä–∏–≥–æ–¥–Ω–∏—Ü—å–∫–µ –º–∞–π–±—É—Ç–Ω—î.</label
							>
						</div>
						<div id="help" class="help hidden">
							–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è —ñ –ø–æ–∑–Ω–∞—á—Ç–µ –∑–≥–æ–¥—É.
						</div>
						<div
							style="
								display: flex;
								gap: 10px;
								flex-wrap: wrap;
								margin-top: 6px;
							">
							<button class="btn ghost" type="button" id="backToLetter">
								‚Üê –î–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞
							</button>
							<button class="btn primary" type="submit" id="createBtn">
								–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç
							</button>
						</div>
					</form>
				</div>
			</section>

			<!-- –®–∞–≥ 3: –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç -->
			<section id="step3" class="center hidden">
				<div class="cert card">
					<div class="paper" id="paper">
						<h2 id="certTitle">–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –∫–æ—Ö–∞–Ω–Ω—è</h2>
						<h3 id="certSubtitle">‚Äî</h3>
						<p id="certBody"></p>
						<p id="certRights"></p>
						<div class="sign">
							<span id="signLabel">–ü—ñ–¥–ø–∏—Å:</span>
							<span class="line"></span>
							<span id="signName">‚Äî</span>
						</div>
					</div>
					<div class="cert-actions">
						<button id="confirmBtn" class="btn primary">–ü—Ä–∏–π–Ω—è—Ç–∏</button>
						<a id="downloadBtn" class="btn ghost">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF</a>
						<button id="playBtn" class="btn ghost hidden">
							‚ñ∂Ô∏è –£–≤—ñ–º–∫–Ω—É—Ç–∏ –º—É–∑–∏–∫—É
						</button>
					</div>
					<div id="qrBox" class="hidden">
						<div id="qrCaption" style="color: var(--muted); margin: 6px 0 8px">
							QR —É —Ä–∞–¥—ñ—Å—Ç—å
						</div>
						<img id="qrImage" src="qr-code.png" alt="Telegram QR" />
					</div>
				</div>
			</section>

			<div class="hearts" id="hearts"></div>

			<footer id="footerNote">–í—ñ–¥ –û—Ç—à–µ–ª—å–Ω—ñ–∫–∞ –¥–æ –Ü–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü—ñ</footer>
		</main>

		<!-- YouTube API -->
		<script>
			// –ø—ñ–¥–∫–ª—é—á–∞—î–º–æ Iframe API
			(function () {
				const tag = document.createElement("script");
				tag.src = "https://www.youtube.com/iframe_api";
				document.head.appendChild(tag);
			})();
		</script>
		<!-- html2pdf –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è PDF -->
		<script>
			(function () {
				const s = document.createElement("script");
				s.src =
					"https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js";
				document.head.appendChild(s);
			})();
		</script>

		<div id="yt-holder" aria-hidden="true"></div>

		<script>
			// === –ú–æ–≤–∞ (UA / KZ) ===
			const state = { lang: "uk", safeLast: "sertyfikat" };
			const locales = { uk: "uk-UA", kk: "kk-KZ" };
			const i18n = {
				uk: {
					heroNote: "–¢–æ—Ä–∫–Ω–∏—Å—å –∫–æ–Ω–≤–µ—Ä—Ç–∞ ‚úâÔ∏è",
					heroCta: "–ú–∞–ª–µ–Ω—å–∫–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –≤—ñ–¥ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞",
					formTitle: "–ö—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞",
					last: "–ü—Ä—ñ–∑–≤–∏—â–µ",
					first: "–Ü–º'—è",
					middle: "–ü–æ –±–∞—Ç—å–∫–æ–≤—ñ",
					dob: "–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è",
					pob: "–ú—ñ—Å—Ü–µ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è",
					agree:
						"–¢–∞–∫, —è –ø–æ–≥–æ–¥–∂—É—é—Å—å —Å—Ç–∞—Ç–∏ –¥—ñ–≤—á–∏–Ω–æ—é <b>–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –°—Ç–æ—Ä–æ–∂—É–∫–∞</b> —ñ –≤–∏—Ä—É—à–∏—Ç–∏ –∑ –Ω–∏–º —É –≤–µ–ª–∏–∫–µ –ø—Ä–∏–≥–æ–¥–Ω–∏—Ü—å–∫–µ –º–∞–π–±—É—Ç–Ω—î.",
					help: "–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è —ñ –ø–æ–∑–Ω–∞—á—Ç–µ –∑–≥–æ–¥—É.",
					back: "‚Üê –î–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞",
					create: "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç",
					certTitle: "–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –∫–æ—Ö–∞–Ω–Ω—è",
					sign: "–ü—ñ–¥–ø–∏—Å:",
					confirm: "–ü—Ä–∏–π–Ω—è—Ç–∏",
					confirmed: "–ü—Ä–∏–π–Ω—è—Ç–æ ‚ù§",
					download: "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF",
					qrCaption: "–°–∫–∞–Ω—É–π QR, —â–æ–± –Ω–∞–ø–∏—Å–∞—Ç–∏ –º–µ–Ω—ñ –≤ Telegram",
					play: "‚ñ∂Ô∏è –£–≤—ñ–º–∫–Ω—É—Ç–∏ –º—É–∑–∏–∫—É",
				},
				kk: {
					heroNote: "–ö–æ–Ω–≤–µ—Ä—Ç–∫–µ —Ç“Ø—Ä—Ç—ñ“£—ñ–∑ ‚úâÔ∏è",
					heroCta: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–¥–∞–Ω —à–∞“ì—ã–Ω —à–∞“õ—ã—Ä—É",
					formTitle: "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç “Ø—à—ñ–Ω –±—ñ—Ä–Ω–µ—à–µ –∂–æ–ª",
					last: "–¢–µ–≥—ñ",
					first: "–ê—Ç—ã",
					middle: "”ò–∫–µ—Å—ñ–Ω—ñ“£ –∞—Ç—ã",
					dob: "–¢—É“ì–∞–Ω –∫“Ø–Ω—ñ",
					pob: "–¢—É“ì–∞–Ω –∂–µ—Ä—ñ",
					agree:
						"–ò”ô, –º–µ–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°—Ç–æ—Ä–æ–∂—É–∫—Ç—ã“£ “õ—ã–∑—ã –±–æ–ª—É“ì–∞ –∂”ô–Ω–µ –æ–Ω—ã–º–µ–Ω –±—ñ—Ä–≥–µ “Ø–ª–∫–µ–Ω –æ“õ–∏“ì–∞–ª—ã –±–æ–ª–∞—à–∞“õ“õ–∞ –∞—Ç—Ç–∞–Ω—É“ì–∞ –∫–µ–ª—ñ—Å–µ–º—ñ–Ω.",
					help: "–ë–∞—Ä–ª—ã“õ ”©—Ä—ñ—Å—Ç–µ—Ä–¥—ñ —Ç–æ–ª—Ç—ã—Ä—ã–ø, –∫–µ–ª—ñ—Å—ñ–º–¥—ñ –±–µ–ª–≥—ñ–ª–µ“£—ñ–∑.",
					back: "‚Üê –ö–æ–Ω–≤–µ—Ä—Ç–∫–µ",
					create: "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∂–∞—Å–∞—É",
					certTitle: "–ú–∞—Ö–∞–±–±–∞—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã",
					sign: "“ö–æ–ª—Ç–∞“£–±–∞:",
					confirm: "“ö–∞–±—ã–ª–¥–∞–π–º—ã–Ω",
					confirmed: "“ö–∞–±—ã–ª–¥–∞–Ω–¥—ã ‚ù§",
					download: "PDF –∂“Ø–∫—Ç–µ—É",
					qrCaption: "Telegram-“ì–∞ –∂–∞–∑—É “Ø—à—ñ–Ω QR —Å–∫–∞–Ω–µ—Ä–ª–µ“£—ñ–∑",
					play: "‚ñ∂Ô∏è –ú—É–∑—ã–∫–∞–Ω—ã “õ–æ—Å—É",
				},
			};

			function applyI18n() {
				const t = i18n[state.lang];
				document.getElementById("heroNote").textContent = t.heroNote;
				document.getElementById("heroCta").textContent = t.heroCta;
				document.getElementById("formTitle").textContent = t.formTitle;
				document.getElementById("lblLast").textContent = t.last;
				document.getElementById("lblFirst").textContent = t.first;
				document.getElementById("lblMiddle").textContent = t.middle;
				document.getElementById("lblDob").textContent = t.dob;
				document.getElementById("lblPob").textContent = t.pob;
				document.getElementById("agreeText").innerHTML = t.agree;
				document.getElementById("help").textContent = t.help;
				document.getElementById("backToLetter").textContent = t.back;
				document.getElementById("createBtn").textContent = t.create;
				document.getElementById("certTitle").textContent = t.certTitle;
				document.getElementById("signLabel").textContent = t.sign;
				document.getElementById("confirmBtn").textContent = t.confirm;
				document.getElementById("downloadBtn").textContent = t.download;
				document.getElementById("qrCaption").textContent = t.qrCaption;
				document.getElementById("langLabel").textContent =
					state.lang === "uk" ? "UK" : "KZ";
				document.getElementById("playBtn").textContent = t.play;
			}

			const langBtn = document.getElementById("langBtn");
			langBtn.addEventListener("click", () => {
				state.lang = state.lang === "uk" ? "kk" : "uk";
				applyI18n();
			});

			// === –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏ ===
			const s1 = document.getElementById("step1");
			const s2 = document.getElementById("step2");
			const s3 = document.getElementById("step3");
			const envelopeWrap = document.getElementById("envelopeWrap");
			const backToLetter = document.getElementById("backToLetter");

			const show = (el) => {
				el.classList.remove("hidden");
			};
			const hide = (el) => {
				el.classList.add("hidden");
			};

			envelopeWrap.addEventListener("click", () => {
				envelopeWrap.classList.add("opened");
				hide(s1);
				show(s2);
				setTimeout(() => window.scrollTo({ top: 0, behavior: "smooth" }), 50);
			});
			backToLetter.addEventListener("click", () => {
				hide(s2);
				show(s1);
				envelopeWrap.classList.remove("opened");
			});

			// === –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ ===
			const form = document.getElementById("inviteForm");
			const help = document.getElementById("help");
			const certSubtitle = document.getElementById("certSubtitle");
			const certBody = document.getElementById("certBody");
			const certRights = document.getElementById("certRights");
			const signName = document.getElementById("signName");
			const confirmBtn = document.getElementById("confirmBtn");
			const downloadBtn = document.getElementById("downloadBtn");
			const playBtn = document.getElementById("playBtn");

			function fmtDateISOtoLocale(v) {
				if (!v) return "";
				try {
					const d = new Date(v + "T00:00:00");
					return d.toLocaleDateString(locales[state.lang], {
						year: "numeric",
						month: "long",
						day: "numeric",
					});
				} catch (e) {
					return v;
				}
			}

			form.addEventListener("submit", (e) => {
				e.preventDefault();
				const last = document.getElementById("last").value.trim();
				const first = document.getElementById("first").value.trim();
				const middle = document.getElementById("middle").value.trim();
				const dob = document.getElementById("dob").value;
				const pob = document.getElementById("pob").value.trim();
				const agree = document.getElementById("agree").checked;

				if (!last || !first || !middle || !dob || !pob || !agree) {
					help.classList.remove("hidden");
					return;
				}
				help.classList.add("hidden");

				const full = `${last} ${first} ${middle}`;
				const dobLoc = fmtDateISOtoLocale(dob);

				certSubtitle.textContent = `–¥–ª—è ${full}`;
				certBody.innerHTML = `–Ø, <b>${full}</b>, <i>${dobLoc}</i> —Ä–æ–∫—É –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è, –º—ñ—Å—Ü–µ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è ‚Äî <i>${pob}</i>, —É—Ä–æ—á–∏—Å—Ç–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é, —â–æ –∑ —Ü—ñ—î—ó –º–∏—Ç—ñ —ñ–∑ —Ä–∞–¥—ñ—Å—Ç—é —Å—Ç–∞—é –¥—ñ–≤—á–∏–Ω–æ—é <b>–û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –°—Ç–æ—Ä–æ–∂—É–∫–∞</b>. –û–±—ñ—Ü—è—é —Å–º—ñ—è—Ç–∏—Å—è –∑ –Ω–∏–º, —Ä–∞–¥—ñ—Ç–∏, –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —ñ –¥—ñ–ª–∏—Ç–∏—Å—è –ø—Ä–∏–≥–æ–¥–∞–º–∏ —â–æ–¥–Ω—è.`;
				certRights.textContent = "";
				signName.textContent = full;

				// –¥–ª—è —ñ–º–µ–Ω—ñ —Ñ–∞–π–ª—É PDF
				state.safeLast =
					last.toLowerCase().replace(/[^a-z–∞-—è“ë—î—ñ—ó—ë-]+/gi, "-") || "sertyfikat";

				hide(s2);
				show(s3);
				setTimeout(() => window.scrollTo({ top: 0, behavior: "smooth" }), 50);
			});

			// === –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É PDF ===
			downloadBtn.addEventListener("click", async (e) => {
				e.preventDefault();
				if (!window.html2pdf) {
					alert("PDF –º–æ–¥—É–ª—å —â–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —â–µ —Ä–∞–∑ –∑–∞ —Å–µ–∫—É–Ω–¥—É.");
					return;
				}
				const opt = {
					margin: 10,
					filename: `sertyfikat-kohannia-${state.safeLast}.pdf`,
					image: { type: "jpeg", quality: 0.98 },
					html2canvas: { scale: 2, useCORS: true },
					jsPDF: { unit: "mm", format: "a4", orientation: "portrait" },
				};
				window
					.html2pdf()
					.set(opt)
					.from(document.getElementById("paper"))
					.save();
			});

			// === –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è + –∫–æ–Ω—Ñ–µ—Ç—ñ + –º—É–∑–∏–∫–∞ + QR ===
			confirmBtn.addEventListener("click", () => {
				const t = i18n[state.lang];
				confirmBtn.disabled = true;
				confirmBtn.textContent = t.confirmed;
				burstHearts();
				// —Ç–µ–∫—Å—Ç –ø—Ä–∞–≤ –∑ –º–æ–º–µ–Ω—Ç—É –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
				const now = new Date();
				const when = now.toLocaleString(locales[state.lang], {
					year: "numeric",
					month: "long",
					day: "numeric",
					hour: "2-digit",
					minute: "2-digit",
				});
				const textUK = `–¶–µ–π —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞–¥–∞—î –ø—Ä–∞–≤–æ –Ω–∞ –±–µ–∑–º–µ–∂–Ω—ñ –æ–±—ñ–π–º–∏, —Å–º—ñ—Ö, —Å–ø—ñ–ª—å–Ω—ñ –ø–æ–¥–æ—Ä–æ–∂—ñ, –≤–µ—á–æ—Ä–∏, –ø–∞–ª–∫–∏–π —Å–µ–∫—Å —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É 24/7. –î—ñ–π—Å–Ω–∏–π –≤—ñ–¥ ${when} –¥–æ ‚Äî ‚àû.`;
				const textKZ = `–ë“±–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —à–µ–∫—Å—ñ–∑ “õ“±—à–∞“õ—Ç–∞—É, –∫“Ø–ª–∫—ñ, –æ—Ä—Ç–∞“õ —Å–∞–ø–∞—Ä–ª–∞—Ä, –∫–µ—à—Ç–µ—Ä, “õ“±–º–∞—Ä–ª—ã“õ —Å–µ–∫—Å –∂”ô–Ω–µ 24/7 “õ–æ–ª–¥–∞—É “õ“±“õ—ã“ì—ã–Ω –±–µ—Ä–µ–¥—ñ. –ñ–∞—Ä–∞–º–¥—ã: ${when} –±–∞—Å—Ç–∞–ø ‚Äî ‚àû –¥–µ–π—ñ–Ω.`;
				certRights.textContent = state.lang === "uk" ? textUK : textKZ;
				// –ü–æ–∫–∞–∑–∞—Ç–∏ QR
				document.getElementById("qrBox").classList.remove("hidden");
				// –ú—É–∑–∏–∫–∞
				playSong();
			});

			// === YouTube ===
			let ytReady = false,
				ytPlayer = null,
				songStarted = false;
			window.onYouTubeIframeAPIReady = function () {
				ytReady = true;
			};

			function playSong() {
				const holder = document.getElementById("yt-holder");
				// —è–∫—â–æ API –≥–æ—Ç–æ–≤–∏–π ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ Player
				if (ytReady) {
					if (!document.getElementById("ytplayer")) {
						const el = document.createElement("div");
						el.id = "ytplayer";
						el.style.position = "absolute";
						el.style.left = "-9999px";
						el.style.top = "-9999px";
						holder.appendChild(el);
						ytPlayer = new YT.Player("ytplayer", {
							height: "1",
							width: "1",
							videoId: "D1Ukgsfj9ss",
							playerVars: { autoplay: 1, controls: 0, rel: 0, playsinline: 1 },
							events: {
								onReady: (e) => {
									e.target.playVideo();
									songStarted = true;
								},
								onStateChange: (ev) => {
									if (ev.data === 1) songStarted = true;
								},
							},
						});
					} else if (ytPlayer) {
						ytPlayer.playVideo();
						songStarted = true;
					}
				} else {
					// —Ñ–æ–ª–±—ç–∫ ‚Äî –ø—Ä–æ—Å—Ç–∏–π iframe –∑ autoplay
					if (!document.getElementById("ytframe")) {
						const ifr = document.createElement("iframe");
						ifr.id = "ytframe";
						ifr.width = 1;
						ifr.height = 1;
						ifr.style.position = "absolute";
						ifr.style.left = "-9999px";
						ifr.style.top = "-9999px";
						ifr.setAttribute("allow", "autoplay; encrypted-media");
						ifr.src =
							"https://www.youtube.com/embed/D1Ukgsfj9ss?autoplay=1&rel=0&controls=0&playsinline=1";
						holder.appendChild(ifr);
					}
				}
				// —è–∫—â–æ –Ω–µ —Å—Ç–∞—Ä—Ç—É–≤–∞–ª–æ ‚Äî –ø–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É "–£–≤—ñ–º–∫–Ω—É—Ç–∏ –º—É–∑–∏–∫—É"
				setTimeout(() => {
					if (!songStarted)
						document.getElementById("playBtn").classList.remove("hidden");
				}, 1500);
			}

			document.getElementById("playBtn").addEventListener("click", () => {
				// –≤—ñ–¥–∫—Ä–∏—î–º–æ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è —è–≤–Ω–æ
				const w = window.open(
					"https://www.youtube.com/watch?v=D1Ukgsfj9ss",
					"_blank"
				);
				if (!w) {
					alert("–î–æ–∑–≤–æ–ª—å —Å–ø–ª–∏–≤–∞—é—á—ñ –≤—ñ–∫–Ω–∞, —â–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –º—É–∑–∏–∫—É.");
				}
			});

			// –°–µ—Ä–¥–µ—á–∫–∞‚Äë–∫–æ–Ω—Ñ–µ—Ç—ñ
			function burstHearts() {
				const box = document.getElementById("hearts");
				const rect = document.getElementById("paper").getBoundingClientRect();
				const cx = rect.left + rect.width / 2;
				const cy = rect.top + window.scrollY + rect.height / 2;
				for (let i = 0; i < 60; i++) {
					const s = document.createElement("span");
					s.className = "heart";
					const angle = (Math.random() * 360 * Math.PI) / 180;
					const dist = 80 + Math.random() * 420;
					const dx = Math.cos(angle) * dist;
					const dy = Math.sin(angle) * dist;
					s.style.left = cx + "px";
					s.style.top = cy + "px";
					s.style.setProperty("--dx", dx + "px");
					s.style.setProperty("--dy", dy + "px");
					s.style.animation = `burst ${
						700 + Math.random() * 900
					}ms ease-out forwards`;
					s.style.opacity = 0.9;
					s.style.filter = `hue-rotate(${Math.random() * 60 - 30}deg)`;
					box.appendChild(s);
					setTimeout(() => s.remove(), 1800);
				}
			}

			// –ü–æ—á–∞—Ç–∫–æ–≤–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º–æ–≤–∏
			applyI18n();
		</script>
	</body>
</html>
